//****************************************************************************
//
// STRLEN.S - Routine to implement the C library function "strlen".
//
// Copyright (c) 1999,2000,2001 Cirrus Logic, Inc.
//
//****************************************************************************

#include "../../asmdefs.h"

//****************************************************************************
//
// Read-only code area.
//
//****************************************************************************
    _TEXT_

//****************************************************************************
//
// Standard C library function "strlen".
//
//****************************************************************************
    _EXPORT_ strlen
strlen _LABEL_
    mov     r2, _CONST_ 0
strlen0 _LABEL_
    ldrb    r1, [r0], _CONST_ 1
    cmp     r1, _CONST_ 0
    addne   r2, r2, _CONST_ 1
    bne     strlen0
    mov     r0, r2
    mov     pc, r14

    _END_
